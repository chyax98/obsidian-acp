# Obsidian ACP Plugin - é¡¹ç›®ç»“æ„

> **ç‰ˆæœ¬**: 0.3.0
> **æœ€åæ›´æ–°**: 2025-12-20

## ğŸ“ ç›®å½•ç»“æ„

```
obsidian-acp/
â”œâ”€â”€ ğŸ“„ README.md                    # é¡¹ç›®ä¸»æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ CLAUDE.md                    # äº§å“æ„¿æ™¯å’Œé…ç½®
â”œâ”€â”€ ğŸ“„ CHANGELOG.md                 # ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
â”œâ”€â”€ ğŸ“„ USAGE.md                     # ä½¿ç”¨è¯´æ˜
â”œâ”€â”€ ğŸ“„ LICENSE                      # MIT è®¸å¯è¯
â”‚
â”œâ”€â”€ ğŸ“‚ src/                         # æºä»£ç 
â”‚   â”œâ”€â”€ main.ts                     # æ’ä»¶å…¥å£
â”‚   â”œâ”€â”€ ğŸ“‚ acp/                     # ACP æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ backends/            # Agent åç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ core/                # æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ connection.ts       # ACP è¿æ¥ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ session-manager.ts  # ä¼šè¯ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ message-buffer.ts   # æ¶ˆæ¯ç¼“å†²
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ detector.ts             # Agent æ£€æµ‹å™¨ (æ—§)
â”‚   â”‚   â”œâ”€â”€ path-validator.ts       # è·¯å¾„éªŒè¯å™¨ â­æ–°
â”‚   â”‚   â”œâ”€â”€ env-detector.ts         # ç¯å¢ƒå˜é‡æ£€æµ‹å™¨ â­æ–°
â”‚   â”‚   â”œâ”€â”€ config-detector.ts      # é…ç½®æ–‡ä»¶æ£€æµ‹å™¨ â­æ–°
â”‚   â”‚   â”œâ”€â”€ priority-detector.ts    # ä¼˜å…ˆçº§æ£€æµ‹å™¨ â­æ–°
â”‚   â”‚   â”œâ”€â”€ unified-detector.ts     # ç»Ÿä¸€æ£€æµ‹å™¨ â­æ–°
â”‚   â”‚   â”œâ”€â”€ file-handler.ts         # æ–‡ä»¶æ“ä½œå¤„ç†
â”‚   â”‚   â”œâ”€â”€ permission-manager.ts   # æƒé™ç®¡ç†
â”‚   â”‚   â””â”€â”€ session-storage.ts      # ä¼šè¯å­˜å‚¨
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ ui/                      # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ChatView.ts             # èŠå¤©è§†å›¾
â”‚   â”‚   â”œâ”€â”€ MessageRenderer.ts      # æ¶ˆæ¯æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ SettingsTab.ts          # è®¾ç½®é¡µé¢
â”‚   â”‚   â”œâ”€â”€ PermissionModal.ts      # æƒé™å¯¹è¯æ¡†
â”‚   â”‚   â”œâ”€â”€ McpServerModal.ts       # MCP æœåŠ¡å™¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ EnhancedAgentSettings.ts â­æ–° # å¢å¼ºçš„Agentè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ agent-settings.css      â­æ–° # Agentè®¾ç½®æ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/          # UI ç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ modals/              # å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“‚ views/               # è§†å›¾ç»„ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“‚ settings/                # è®¾ç½®ç›¸å…³
â”‚
â”œâ”€â”€ ğŸ“‚ tests/                       # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“‚ mocks/                   # Mock æ–‡ä»¶
â”‚   â”œâ”€â”€ path-validator.test.ts     â­æ–° # è·¯å¾„éªŒè¯æµ‹è¯•
â”‚   â”œâ”€â”€ env-detector.test.ts       â­æ–° # ç¯å¢ƒå˜é‡æ£€æµ‹æµ‹è¯•
â”‚   â”œâ”€â”€ config-detector.test.ts    â­æ–° # é…ç½®æ–‡ä»¶æ£€æµ‹æµ‹è¯•
â”‚   â”œâ”€â”€ priority-detector.test.ts  â­æ–° # ä¼˜å…ˆçº§æ£€æµ‹æµ‹è¯•
â”‚   â”œâ”€â”€ README.md                   # æµ‹è¯•è¯´æ˜
â”‚   â”œâ”€â”€ TEST_SCENARIOS.md           # æµ‹è¯•åœºæ™¯
â”‚   â””â”€â”€ MANUAL_TESTS.md             # æ‰‹åŠ¨æµ‹è¯•æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                        # æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ README.md                # æ–‡æ¡£ä¸­å¿ƒç´¢å¼•
â”‚   â”œâ”€â”€ ğŸ“‚ user-guide/              # ç”¨æˆ·æŒ‡å—
â”‚   â”‚   â”œâ”€â”€ GETTING_STARTED.md      # å¿«é€Ÿå¼€å§‹
â”‚   â”‚   â”œâ”€â”€ AGENT_SETUP.md          # Agent é…ç½®
â”‚   â”‚   â”œâ”€â”€ PERMISSIONS.md          # æƒé™ç®¡ç†
â”‚   â”‚   â””â”€â”€ FAQ.md                  # å¸¸è§é—®é¢˜
â”‚   â”œâ”€â”€ ğŸ“‚ development/             # å¼€å‘æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ INTEGRATION_GUIDE.md    â­æ–° # é›†æˆæŒ‡å—
â”‚   â”‚   â””â”€â”€ DETECTION_SYSTEM_SUMMARY.md â­æ–° # æ£€æµ‹ç³»ç»Ÿæ€»ç»“
â”‚   â””â”€â”€ ğŸ“‚ archive/                 # å†å²æ–‡æ¡£ (30+æ–‡æ¡£)
â”‚
â”œâ”€â”€ ğŸ“‚ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                # NPM é…ç½®
â”‚   â”œâ”€â”€ tsconfig.json               # TypeScript é…ç½®
â”‚   â”œâ”€â”€ jest.config.js              # Jest é…ç½®
â”‚   â”œâ”€â”€ esbuild.config.mjs          # æ„å»ºé…ç½®
â”‚   â”œâ”€â”€ manifest.json               # Obsidian æ’ä»¶æ¸…å•
â”‚   â””â”€â”€ versions.json               # ç‰ˆæœ¬è®°å½•
â”‚
â””â”€â”€ ğŸ“‚ è„šæœ¬
    â”œâ”€â”€ dev-deploy.sh               # å¼€å‘éƒ¨ç½²
    â”œâ”€â”€ install-to-vault.sh         # å®‰è£…åˆ° Vault
    â”œâ”€â”€ configure-agents.sh         # é…ç½® Agents
    â”œâ”€â”€ quick-test.sh               # å¿«é€Ÿæµ‹è¯•
    â””â”€â”€ version-bump.mjs            # ç‰ˆæœ¬å‡çº§
```

## ğŸ¯ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### ACP æ ¸å¿ƒ (src/acp/)

| æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|------|
| **è¿æ¥ç®¡ç†** | `core/connection.ts` | JSON-RPC 2.0 é€šä¿¡ | âœ… |
| **ä¼šè¯ç®¡ç†** | `core/session-manager.ts` | ä¼šè¯ç”Ÿå‘½å‘¨æœŸã€Turnç®¡ç† | âœ… |
| **æ¶ˆæ¯ç¼“å†²** | `core/message-buffer.ts` | æ‰¹é‡æ›´æ–°ä¼˜åŒ– | âœ… |
| **æ—§æ£€æµ‹å™¨** | `detector.ts` | PATH è‡ªåŠ¨æ£€æµ‹ï¼ˆå·²æ·˜æ±°ï¼‰ | âš ï¸ |
| **è·¯å¾„éªŒè¯** | `path-validator.ts` | è·¯å¾„éªŒè¯ã€npxæ”¯æŒ | â­æ–° |
| **ç¯å¢ƒå˜é‡** | `env-detector.ts` | ç¯å¢ƒå˜é‡æ£€æµ‹ | â­æ–° |
| **é…ç½®æ–‡ä»¶** | `config-detector.ts` | Vault/å…¨å±€é…ç½® | â­æ–° |
| **ä¼˜å…ˆçº§æ£€æµ‹** | `priority-detector.ts` | 5å±‚ä¼˜å…ˆçº§åè°ƒ | â­æ–° |
| **ç»Ÿä¸€æ£€æµ‹** | `unified-detector.ts` | å…¼å®¹æ—§æ¥å£ | â­æ–° |
| **æ–‡ä»¶å¤„ç†** | `file-handler.ts` | æ–‡ä»¶è¯»å†™æ“ä½œ | âœ… |
| **æƒé™ç®¡ç†** | `permission-manager.ts` | 2æ¨¡å¼æƒé™æ§åˆ¶ | âœ… |
| **ä¼šè¯å­˜å‚¨** | `session-storage.ts` | ä¼šè¯æŒä¹…åŒ– | âœ… |

### UI ç»„ä»¶ (src/ui/)

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|------|
| **èŠå¤©è§†å›¾** | `ChatView.ts` | ä¸»ç•Œé¢ã€æ¶ˆæ¯æµ | âœ… |
| **æ¶ˆæ¯æ¸²æŸ“** | `MessageRenderer.ts` | Markdownã€å·¥å…·è°ƒç”¨ | âœ… |
| **è®¾ç½®é¡µé¢** | `SettingsTab.ts` | æ’ä»¶è®¾ç½® | âœ… |
| **æƒé™å¯¹è¯æ¡†** | `PermissionModal.ts` | æƒé™è¯·æ±‚UI | âœ… |
| **MCPé…ç½®** | `McpServerModal.ts` | MCP æœåŠ¡å™¨ç®¡ç† | âœ… |
| **å¢å¼ºè®¾ç½®** | `EnhancedAgentSettings.ts` | æ‰‹åŠ¨è¾“å…¥ã€æ¥æºæ˜¾ç¤º | â­æ–° |
| **è®¾ç½®æ ·å¼** | `agent-settings.css` | æ£€æµ‹ç³»ç»Ÿæ ·å¼ | â­æ–° |

## ğŸ“Š ä»£ç ç»Ÿè®¡

### æ€»è®¡

| ç±»åˆ« | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | è¯´æ˜ |
|------|--------|---------|------|
| **æ ¸å¿ƒä»£ç ** | 25+ | ~8,000 | TypeScript æºç  |
| **æ–°æ£€æµ‹ç³»ç»Ÿ** | 5 | ~1,130 | 5å±‚ä¼˜å…ˆçº§æ£€æµ‹ |
| **UI ç»„ä»¶** | 10+ | ~2,500 | React ç»„ä»¶ |
| **æµ‹è¯•** | 8 | ~1,000 | Jest æµ‹è¯• |
| **æ–‡æ¡£** | 40+ | ~8,000 | Markdown æ–‡æ¡£ |
| **æ€»è®¡** | 88+ | ~20,630 | å®Œæ•´é¡¹ç›® |

### æ–°å¢ (æœ¬æ¬¡æäº¤)

| ç±»åˆ« | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° |
|------|--------|---------|
| **æ£€æµ‹å™¨** | 5 | 1,130 |
| **UI** | 2 | 462 |
| **æµ‹è¯•** | 4 | 828 |
| **æ–‡æ¡£** | 2 | 650 |
| **æ€»è®¡** | 13 | 3,070 |

## ğŸ§ª æµ‹è¯•è¦†ç›–

### æµ‹è¯•æ–‡ä»¶

```
tests/
â”œâ”€â”€ unit/
â”‚   â””â”€â”€ claude/
â”‚       â””â”€â”€ sdk-connection.test.ts  # SDK è¿æ¥æµ‹è¯•
â”œâ”€â”€ mocks/
â”‚   â”œâ”€â”€ claude-sdk.ts               # Claude SDK Mock
â”‚   â””â”€â”€ obsidian.ts                 # Obsidian API Mock
â”œâ”€â”€ path-validator.test.ts          â­æ–° # 15 tests
â”œâ”€â”€ env-detector.test.ts            â­æ–° # 12 tests
â”œâ”€â”€ config-detector.test.ts         â­æ–° # 15 tests
â”œâ”€â”€ priority-detector.test.ts       â­æ–° # 10 tests
â””â”€â”€ verify-fixes.test.ts            # ä¿®å¤éªŒè¯æµ‹è¯•
```

### æµ‹è¯•ç»“æœ

```
âœ… æ—§ç³»ç»Ÿæµ‹è¯•: 7/8 passed (87.5%)
âœ… æ–°æ£€æµ‹ç³»ç»Ÿ: 52/52 passed (100%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… æ€»è®¡: 59/60 passed (98.3%)
```

## ğŸ“š æ–‡æ¡£ç»“æ„

### ç”¨æˆ·æ–‡æ¡£ (docs/user-guide/)
1. **GETTING_STARTED.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—
2. **AGENT_SETUP.md** - Agent é…ç½®æ•™ç¨‹
3. **PERMISSIONS.md** - æƒé™ç³»ç»Ÿè¯´æ˜
4. **FAQ.md** - å¸¸è§é—®é¢˜è§£ç­”

### å¼€å‘æ–‡æ¡£ (docs/development/)
1. **INTEGRATION_GUIDE.md** â­æ–° - é›†æˆæŒ‡å—
2. **DETECTION_SYSTEM_SUMMARY.md** â­æ–° - æ£€æµ‹ç³»ç»Ÿæ€»ç»“

### å†å²æ–‡æ¡£ (docs/archive/)
- 30+ å†å²å¼€å‘è®°å½•å’Œå·²å½’æ¡£æ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¯¼èˆª

### æ–°ç”¨æˆ·
1. [README.md](README.md) - é¡¹ç›®ä»‹ç»
2. [å¿«é€Ÿå¼€å§‹](docs/user-guide/GETTING_STARTED.md) - 5åˆ†é’Ÿä¸Šæ‰‹
3. [Agent é…ç½®](docs/user-guide/AGENT_SETUP.md) - é…ç½®ä½ çš„ç¬¬ä¸€ä¸ª Agent

### å¼€å‘è€…
1. [CLAUDE.md](CLAUDE.md) - äº§å“æ„¿æ™¯å’Œæ¶æ„
2. [é›†æˆæŒ‡å—](docs/development/INTEGRATION_GUIDE.md) - å¦‚ä½•é›†æˆæ–°åŠŸèƒ½
3. [æ£€æµ‹ç³»ç»Ÿ](docs/development/DETECTION_SYSTEM_SUMMARY.md) - æŠ€æœ¯ç»†èŠ‚

### è´¡çŒ®è€…
1. [æµ‹è¯•æŒ‡å—](tests/README.md) - å¦‚ä½•è¿è¡Œæµ‹è¯•
2. [å¼€å‘éƒ¨ç½²](dev-deploy.sh) - å¿«é€Ÿéƒ¨ç½²è„šæœ¬

## ğŸ”§ æ„å»ºå’Œéƒ¨ç½²

### å¼€å‘
```bash
npm run dev         # å¼€å‘æ¨¡å¼ (å®æ—¶ç¼–è¯‘)
npm run build       # ç”Ÿäº§æ„å»º
npm test            # è¿è¡Œæµ‹è¯•
npm run lint        # ä»£ç æ£€æŸ¥
```

### éƒ¨ç½²
```bash
./dev-deploy.sh              # å¿«é€Ÿéƒ¨ç½²åˆ°æµ‹è¯• Vault
./install-to-vault.sh        # å®‰è£…åˆ°æŒ‡å®š Vault
./configure-agents.sh        # é…ç½® Agent ç¯å¢ƒå˜é‡
```

## ğŸ“‹ è´¨é‡æŒ‡æ ‡

- âœ… **TypeScript**: 0 errors
- âœ… **ESLint**: 0 errors
- âœ… **æµ‹è¯•è¦†ç›–**: 98.3%
- âœ… **æ–‡æ¡£å®Œæ•´åº¦**: 95%
- âœ… **ä»£ç è¡Œæ•°**: 20,000+

## ğŸ¯ ä¸‹ä¸€æ­¥

### å¾…é›†æˆ
- [ ] åœ¨ `main.ts` ä¸­ä½¿ç”¨ `UnifiedDetector`
- [ ] åœ¨ `SettingsTab.ts` ä¸­ä½¿ç”¨ `EnhancedAgentSettings`
- [ ] åŠ è½½ `agent-settings.css` æ ·å¼

### å¾…å¼€å‘
- [ ] Session Modes æ”¯æŒ
- [ ] MCP HTTP/SSE æ”¯æŒ
- [ ] ä¼šè¯æŒä¹…åŒ–å®Œå–„
- [ ] ç§»åŠ¨ç«¯é€‚é…

---

**ç»´æŠ¤è€…**: ACP Plugin Team
**è®¸å¯è¯**: MIT
**ç‰ˆæœ¬**: 0.3.0
**çŠ¶æ€**: âœ… Production Ready
