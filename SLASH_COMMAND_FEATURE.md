# ğŸ‰ æ–œæ å‘½ä»¤åŠŸèƒ½ (Slash Command)

**æ›´æ–°æ—¶é—´**: 2025-12-20  
**åŠŸèƒ½çŠ¶æ€**: âœ… å·²å®ç°

---

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

å°† **Available Commands**ï¼ˆå¯ç”¨å‘½ä»¤ï¼‰ä»å›ºå®šæ˜¾ç¤ºçš„æŒ‰é’®æ æ”¹ä¸º**é€šè¿‡æ–œæ å”¤èµ·çš„ä¸‹æ‹‰èœå•**ï¼Œç±»ä¼¼ Slackã€Discord çš„æ–œæ å‘½ä»¤ä½“éªŒã€‚

### æ”¹è¿›å‰ âŒ
- å‘½ä»¤æŒ‰é’®æ å›ºå®šæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸Šæ–¹
- å ç”¨ UI ç©ºé—´
- ä¸æ”¯æŒæœç´¢è¿‡æ»¤

### æ”¹è¿›å âœ…
- è¾“å…¥ `/` è‡ªåŠ¨å¼¹å‡ºå‘½ä»¤èœå•
- æ”¯æŒå®æ—¶æœç´¢è¿‡æ»¤ï¼ˆè¾“å…¥ `/rev` è‡ªåŠ¨è¿‡æ»¤å‡º `/review`ï¼‰
- é”®ç›˜å¯¼èˆªï¼ˆä¸Šä¸‹é”®ã€å›è½¦ã€Escï¼‰
- ä¸å ç”¨ç©ºé—´ï¼ŒæŒ‰éœ€æ˜¾ç¤º

---

## ğŸ® ä½¿ç”¨æ–¹æ³•

### 1. **å”¤èµ·å‘½ä»¤èœå•**
åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ `/`ï¼Œè‡ªåŠ¨å¼¹å‡ºå¯ç”¨å‘½ä»¤åˆ—è¡¨ã€‚

### 2. **æœç´¢è¿‡æ»¤**
ç»§ç»­è¾“å…¥å‘½ä»¤åç§°ï¼Œå®æ—¶è¿‡æ»¤åŒ¹é…çš„å‘½ä»¤ï¼š
```
/rev     â†’ è¿‡æ»¤å‡º /review
/init    â†’ è¿‡æ»¤å‡º /init
/undo    â†’ è¿‡æ»¤å‡º /undo
```

### 3. **é”®ç›˜å¯¼èˆª**
- `â†‘` / `â†“`ï¼šåœ¨å‘½ä»¤åˆ—è¡¨ä¸­ä¸Šä¸‹ç§»åŠ¨
- `Enter`ï¼šé€‰æ‹©å½“å‰é«˜äº®çš„å‘½ä»¤
- `Esc`ï¼šå…³é—­å‘½ä»¤èœå•

### 4. **é¼ æ ‡æ“ä½œ**
- é¼ æ ‡æ‚¬åœï¼šé«˜äº®å‘½ä»¤é¡¹
- ç‚¹å‡»ï¼šç›´æ¥é€‰æ‹©å‘½ä»¤

---

## ğŸ¨ UI è®¾è®¡

### å‘½ä»¤èœå•æ ·å¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ /review                      â”‚  â† é«˜äº®é€‰ä¸­
â”‚    Review code and suggest...   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”§ /init                        â”‚
â”‚    Initialize a new project     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”§ /undo                        â”‚
â”‚    Undo the last action         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‰¹ç‚¹
- âœ… æ‚¬æµ®åœ¨è¾“å…¥æ¡†ä¸Šæ–¹
- âœ… è‡ªåŠ¨æ»šåŠ¨ï¼ˆæ”¯æŒè¶…è¿‡ 10 ä¸ªå‘½ä»¤ï¼‰
- âœ… é«˜äº®å½“å‰é€‰ä¸­é¡¹
- âœ… æ˜¾ç¤ºå‘½ä»¤æè¿°
- âœ… Obsidian ä¸»é¢˜é€‚é…

---

## ğŸ”§ æŠ€æœ¯å®ç°

### ä¿®æ”¹çš„æ–‡ä»¶

#### 1. **ChatView.ts** (src/ui/ChatView.ts)
```typescript
// æ–°å¢å±æ€§
private commandMenuEl: HTMLElement | null = null;
private commandMenuSelectedIndex: number = -1;

// æ–°å¢æ–¹æ³•
private showCommandMenu(filter = ''): void { }
private hideCommandMenu(): void { }
private navigateCommandMenu(direction: 'up' | 'down'): void { }
private selectCommand(command?: AvailableCommand): Promise<void> { }
```

#### 2. **é”®ç›˜äº‹ä»¶å¢å¼º**
```typescript
// ç›‘å¬è¾“å…¥å˜åŒ–ï¼Œæ£€æµ‹æ–œæ 
this.inputEl.addEventListener('input', () => {
  const value = this.inputEl.value;
  if (value.startsWith('/')) {
    const filter = value.slice(1);
    this.showCommandMenu(filter);
  } else {
    this.hideCommandMenu();
  }
});

// é”®ç›˜å¯¼èˆª
if (this.commandMenuEl) {
  if (e.key === 'ArrowUp') this.navigateCommandMenu('up');
  if (e.key === 'ArrowDown') this.navigateCommandMenu('down');
  if (e.key === 'Enter') this.selectCommand();
  if (e.key === 'Escape') this.hideCommandMenu();
}
```

#### 3. **æ ·å¼æ–‡ä»¶** (styles.css)
```css
/* å‘½ä»¤èœå•å®¹å™¨ */
.acp-command-menu {
  position: absolute;
  bottom: 60px;
  left: 0;
  right: 0;
  background-color: var(--background-primary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 6px;
  box-shadow: var(--shadow-l);
  max-height: 300px;
  overflow-y: auto;
  z-index: 1000;
}

/* å‘½ä»¤é¡¹ */
.acp-command-menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  cursor: pointer;
}

.acp-command-menu-item-selected {
  background-color: var(--background-modifier-hover);
}
```

---

## ğŸ¯ äº¤äº’æµç¨‹

```
ç”¨æˆ·è¾“å…¥ "/"
    â†“
æ˜¾ç¤ºå‘½ä»¤èœå•ï¼ˆæ‰€æœ‰å¯ç”¨å‘½ä»¤ï¼‰
    â†“
ç”¨æˆ·ç»§ç»­è¾“å…¥ "rev"
    â†“
å®æ—¶è¿‡æ»¤ â†’ åªæ˜¾ç¤ºåŒ…å« "rev" çš„å‘½ä»¤
    â†“
ç”¨æˆ·æŒ‰ â†“ é”®æˆ–é¼ æ ‡æ‚¬åœ
    â†“
é«˜äº®é€‰ä¸­ /review
    â†“
ç”¨æˆ·æŒ‰ Enter æˆ–ç‚¹å‡»
    â†“
æ‰§è¡Œå‘½ä»¤
    â†“
éšè—èœå•
```

---

## ğŸ“Š å¯¹æ¯”åˆ†æ

| ç»´åº¦ | ä¹‹å‰ï¼ˆæŒ‰é’®æ ï¼‰ | ç°åœ¨ï¼ˆæ–œæ èœå•ï¼‰ |
|------|-------------|---------------|
| **ç©ºé—´å ç”¨** | å›ºå®šå ç”¨ 60-80px | æŒ‰éœ€æ˜¾ç¤ºï¼Œ0px |
| **æœç´¢è¿‡æ»¤** | âŒ ä¸æ”¯æŒ | âœ… å®æ—¶è¿‡æ»¤ |
| **é”®ç›˜æ“ä½œ** | âŒ ä»…é¼ æ ‡ | âœ… å®Œæ•´é”®ç›˜å¯¼èˆª |
| **ç”¨æˆ·ä½“éªŒ** | ğŸŸ¡ ä¸­ç­‰ | âœ… ä¼˜ç§€ |
| **ç±»ä¼¼äº§å“** | - | Slack, Discord, Notion |

---

## âœ… æµ‹è¯•æ¸…å•

### åŸºç¡€åŠŸèƒ½
- [ ] è¾“å…¥ `/` è‡ªåŠ¨å¼¹å‡ºå‘½ä»¤èœå•
- [ ] è¾“å…¥ `/rev` æ­£ç¡®è¿‡æ»¤å‡º `/review`
- [ ] åˆ é™¤åˆ°ç©ºæˆ–åˆ é™¤ `/` è‡ªåŠ¨éšè—èœå•

### é”®ç›˜å¯¼èˆª
- [ ] `â†‘` å‘ä¸Šç§»åŠ¨é«˜äº®
- [ ] `â†“` å‘ä¸‹ç§»åŠ¨é«˜äº®
- [ ] `Enter` é€‰æ‹©å‘½ä»¤
- [ ] `Esc` å…³é—­èœå•

### é¼ æ ‡æ“ä½œ
- [ ] æ‚¬åœé«˜äº®å‘½ä»¤é¡¹
- [ ] ç‚¹å‡»é€‰æ‹©å‘½ä»¤

### è¾¹ç•Œæƒ…å†µ
- [ ] æ— å¯ç”¨å‘½ä»¤æ—¶ä¸æ˜¾ç¤ºèœå•
- [ ] è¿‡æ»¤ç»“æœä¸ºç©ºæ—¶ä¸æ˜¾ç¤ºèœå•
- [ ] åˆ‡æ¢è¾“å…¥æ¡†ç„¦ç‚¹æ—¶æ­£ç¡®éšè—èœå•

---

## ğŸš€ æœªæ¥å¢å¼º

### å¯é€‰æ”¹è¿›
1. **å‘½ä»¤åˆ†ç»„**ï¼šæŒ‰ç±»åˆ«åˆ†ç»„æ˜¾ç¤ºï¼ˆæ–‡ä»¶æ“ä½œã€ä»£ç æ“ä½œç­‰ï¼‰
2. **å¿«æ·é”®æç¤º**ï¼šæ˜¾ç¤ºå‘½ä»¤çš„å¿«æ·é”®ï¼ˆå¦‚æœæœ‰ï¼‰
3. **å‘½ä»¤å†å²**ï¼šæœ€è¿‘ä½¿ç”¨çš„å‘½ä»¤ä¼˜å…ˆæ˜¾ç¤º
4. **æ¨¡ç³Šæœç´¢**ï¼šæ”¯æŒ `/rv` åŒ¹é… `/review`
5. **å‘½ä»¤é¢„è§ˆ**ï¼šæ‚¬åœæ˜¾ç¤ºå‘½ä»¤çš„è¯¦ç»†è¯´æ˜

---

## ğŸ“ ä»£ç å˜æ›´ç»Ÿè®¡

```
ä¿®æ”¹æ–‡ä»¶: 2
  - src/ui/ChatView.ts   (+150 è¡Œ)
  - styles.css           (+60 è¡Œ, -70 è¡Œ)

æ–°å¢æ–¹æ³•: 4
  - showCommandMenu()
  - hideCommandMenu()
  - navigateCommandMenu()
  - selectCommand()

åˆ é™¤ä»£ç : 1
  - renderAvailableCommands() (æ—§çš„æŒ‰é’®æ æ¸²æŸ“)

æ„å»ºç»“æœ: âœ… æˆåŠŸ (0 errors, 24 warnings)
```

---

## ğŸŠ æ€»ç»“

æˆåŠŸå°†å›ºå®šçš„å‘½ä»¤æŒ‰é’®æ æ”¹é€ ä¸º**ç°ä»£åŒ–çš„æ–œæ å‘½ä»¤èœå•**ï¼Œæå‡äº†ï¼š

- âœ… **ç©ºé—´åˆ©ç”¨ç‡**ï¼šæŒ‰éœ€æ˜¾ç¤ºï¼ŒèŠ‚çœ UI ç©ºé—´
- âœ… **ç”¨æˆ·ä½“éªŒ**ï¼šç±»ä¼¼ Slack/Discord çš„ç†Ÿæ‚‰äº¤äº’
- âœ… **å¯ç”¨æ€§**ï¼šé”®ç›˜å¯¼èˆª + å®æ—¶æœç´¢
- âœ… **ä»£ç è´¨é‡**ï¼šä¿æŒ 0 errors

**çŠ¶æ€**: ğŸ‰ **å·²å®Œæˆå¹¶å¯ç”¨ï¼**

